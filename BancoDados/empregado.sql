CREATE TABLE EMPREGADO (
PNOME			VARCHAR(255) NOT NULL,
MINICIAL		CHAR(1),
UNOME			VARCHAR(255) NOT NULL,
SSN				INT,
DATANASC		DATE,
ENDERECO		VARCHAR(255) NOT NULL,
SEXO			CHAR(1) CHECK (SEXO = 'M' OR SEXO = 'F'),
/* SEXO			CHAR(1) CHECK (SEXO IN ('F', 'M')), */
SALARIO			DECIMAL(10,2) NOT NULL CHECK(SALARIO > 0),
SUPERSSN		INT,
DNO				INT CHECK(DNO > 0)
CONSTRAINT PK_EMPREGADO PRIMARY KEY (SSN),
CONSTRAINT FK_EMPREGADO_EMPREGADO FOREIGN KEY (SUPERSSN) REFERENCES EMPREGADO (SSN),
);


CREATE TABLE DEPARTAMENTO (
DNOME			VARCHAR(255) NOT NULL,
DNUMERO			INT CHECK(DNUMERO > 0),
GERSSN			INT,
GERNATAINICIO	DATE,
CONSTRAINT PK_DEPARTAMENTO PRIMARY KEY (DNUMERO),
CONSTRAINT FK_DEPTO_EMPREGADO FOREIGN KEY (GERSSN) REFERENCES EMPREGADO (SSN),
);


ALTER TABLE EMPREGADO
ADD CONSTRAINT FK_EMPREGADO_DEPTO 
FOREIGN KEY (DNO) 
REFERENCES DEPARTAMENTO (DNUMERO)


CREATE TABLE DEPTO_LOCALIZACOES (
DNUMERO			INT,
DLOCALIZACAO	VARCHAR(255),
CONSTRAINT PK_DEPTO_LOCAL PRIMARY KEY (DNUMERO, DLOCALIZACAO),
CONSTRAINT FK_DEPTO_LOCALIZ_DEPTO FOREIGN KEY (DNUMERO) REFERENCES DEPARTAMENTO (DNUMERO),
);


CREATE TABLE PROJETO (
PJNOME			VARCHAR(255),
PNUMERO			INT,
PLOCALIZACAO	VARCHAR(255),
DNUM			INT,
CONSTRAINT PK_PROJETO PRIMARY KEY (PNUMERO),
CONSTRAINT FK_PROJETO_DEPTO FOREIGN KEY (DNUM) REFERENCES DEPARTAMENTO (DNUMERO),
);


CREATE TABLE TRABALHA_EM (
ESSN			INT,
PNO				INT,
HORAS			DECIMAL(5,2)
CONSTRAINT PK_TRABALHA_EM PRIMARY KEY (ESSN, PNO),
CONSTRAINT FK_TRABALHA_EM_EMPREGADO FOREIGN KEY (ESSN) REFERENCES EMPREGADO (SSN),
CONSTRAINT FK_TRABALHA_EM_PROJETO FOREIGN KEY (PNO) REFERENCES PROJETO (PNUMERO),
);


CREATE TABLE DEPENDENTE(
ESSN			INT,
NOME_DEPENDENTE	VARCHAR(255),
SEXO			CHAR(1) CHECK (SEXO = 'M' OR SEXO = 'F'),
DATANASC		DATE,
PARENTESCO		VARCHAR(255),
CONSTRAINT PK_DEPENDENTE PRIMARY KEY (ESSN, NOME_DEPENDENTE),
CONSTRAINT FK_DEPENDENTE_EMPREGADO FOREIGN KEY (ESSN) REFERENCES EMPREGADO (SSN),
);

INSERT INTO EMPREGADO
VALUES ('João','B','Silva',1234567,'09-02-1965','Rua das Flores, 751, São Paulo SP','M',30000,NULL,NULL),
('Fernando','T','Wong',3334455, '08/12/1955','Rua da Lapa, 34, São Paulo, SP','M',40000,NULL,NULL),
('Alice','J','Zelaya',9998877,'19/01/1968','Rua Souza Lima, 35, Curitiba, PR','F',25000,NULL,NULL),
('Jennifer','S','Souza',9876543,'20/06/1941','Av. Arthur de Lima, 54, Santo Amaro, SP','F',43000,NULL,NULL),
('Ronaldo','K','Lima',6668844,'15/09/1962','Rua Rebouças, 65, Piracicaba, SP','M',38000,NULL,NULL),
('Joice','A','Leite',4534534,'31/07/1972','Av. Lucas Obes, 104, São Paulo, SP','F',25000,NULL,NULL),
('André','V','Pereira',9879879,'29/03/1969','Rua Timbira, 35, São Paulo, SP','M',25000,NULL,NULL),
('Jorge','E','Brito',8886655,'10/11/1937', 'Rua do Horto, 47, São Paulo, SP','M',55000,NULL,NULL)


INSERT INTO DEPARTAMENTO
VALUES ('Pesquisa',5,3334455,'22-05-1988'),
('Adminstração',4,9876543,'01/01/1995'),
('Matriz',1,8886655,'19/06/1981')


INSERT INTO DEPTO_LOCALIZACOES
VALUES (1,'São Paulo'),
(4,	'Mauá'),
(5,	'Santo Amaro'),
(5,	'Itú'),
(5,	'São Paulo')


INSERT INTO PROJETO
VALUES ('ProdutoX',1,'Santo Amaro',5),
('ProdutoY',2,'Itú',5),
('ProdutoZ',3,'São Paulo',5),
('Informatização',10,'Mauá',4),
('Reorganização',20,'São Paulo',1),
('Novosbeneficios',30,'Mauá',4)


INSERT INTO TRABALHA_EM
VALUES(1234567,1,32.5),
(1234567,2,	7.5),
(6668844,3,40.0),
(4534534,1,20.0),
(4534534,2,20.0),
(3334455,2,10.0),
(3334455,3,10.0),
(3334455,10,10.0),
(3334455,20,10.0),
(9998877,30,30.0),
(9998877,10,10.0),
(9879879,10,35.0),
(9879879,30,5.0),
(9876543,30,20.0),
(9876543,20,15.0),
(8886655,20,NULL)


INSERT INTO DEPENDENTE
VALUES(3334455,'Alícia','F','05/04/1986','Filha'),
(3334455,'Tiago','M','25/10/1983','Filho'),
(3334455,'Janaína','F','03/05/1958','Esposa'),
(9876543,'Antonio','M','28/02/1942','Marido'),
(1234567,'Michael','M','04/01/1988','Filho'),
(1234567,'Alícia','F','30/12/1988','Filha'),
(1234567,'Elizabeth','F','05/05/1967','Esposa')


UPDATE EMPREGADO SET SUPERSSN = 3334455 WHERE SSN = 1234567
UPDATE EMPREGADO SET SUPERSSN = 8886655 WHERE SSN = 3334455
UPDATE EMPREGADO SET SUPERSSN = 9876543 WHERE SSN = 9998877
UPDATE EMPREGADO SET SUPERSSN = 8886655 WHERE SSN = 9876543
UPDATE EMPREGADO SET SUPERSSN = 3334455 WHERE SSN = 6668844
UPDATE EMPREGADO SET SUPERSSN = 3334455 WHERE SSN = 4534534
UPDATE EMPREGADO SET SUPERSSN = 9876543 WHERE SSN = 9879879


UPDATE EMPREGADO SET DNO = 5 WHERE SSN = 1234567
UPDATE EMPREGADO SET DNO = 5 WHERE SSN = 3334455
UPDATE EMPREGADO SET DNO = 4 WHERE SSN = 9998877
UPDATE EMPREGADO SET DNO = 4 WHERE SSN = 9876543
UPDATE EMPREGADO SET DNO = 5 WHERE SSN = 6668844
UPDATE EMPREGADO SET DNO = 5 WHERE SSN = 4534534
UPDATE EMPREGADO SET DNO = 4 WHERE SSN = 9879879
UPDATE EMPREGADO SET DNO = 1 WHERE SSN = 8886655